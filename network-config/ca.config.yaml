version: '2'

services:

  ca-org1:
    container_name: ca-org1.dealer.com
    image: hyperledger/fabric-ca:$IMAGE_VERSION
    command: sh -c 'fabric-ca-server start -b admin-org1:adminpw'
    environment:
      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server
      - FABRIC_CA_SERVER_CA_NAME=ca-org1
      - FABRIC_CA_SERVER_CA_CERTFILE=/etc/hyperledger/fabric-ca-server-config/ca-org1.dealer.com-cert.pem
      - FABRIC_CA_SERVER_CA_KEYFILE=/etc/hyperledger/fabric-ca-server-config/key.pem
    volumes:
      - ./crypto-config/peerOrganizations/dealer.com/ca/:/etc/hyperledger/fabric-ca-server-config
    ports:
      - "7054:7054"

  ca-org2:
    container_name: ca-org2.insurer.com
    image: hyperledger/fabric-ca:$IMAGE_VERSION
    command: sh -c 'fabric-ca-server start -b admin-org2:adminpw'
    environment:
      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server
      - FABRIC_CA_SERVER_CA_NAME=ca-org2
      - FABRIC_CA_SERVER_CA_CERTFILE=/etc/hyperledger/fabric-ca-server-config/ca-org2.insurer.com-cert.pem
      - FABRIC_CA_SERVER_CA_KEYFILE=/etc/hyperledger/fabric-ca-server-config/key.pem
    volumes:
      - ./crypto-config/peerOrganizations/insurer.com/ca/:/etc/hyperledger/fabric-ca-server-config
    ports:
      - "7154:7154"

  ca-org3:
    container_name: ca-org3.registry.com
    image: hyperledger/fabric-ca:$IMAGE_VERSION
    command: sh -c 'fabric-ca-server start -b admin-org3:adminpw'
    environment:
      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server
      - FABRIC_CA_SERVER_CA_NAME=ca-org3
      - FABRIC_CA_SERVER_CA_CERTFILE=/etc/hyperledger/fabric-ca-server-config/ca-org3.registry.com-cert.pem
      - FABRIC_CA_SERVER_CA_KEYFILE=/etc/hyperledger/fabric-ca-server-config/key.pem
    volumes:
      - ./crypto-config/peerOrganizations/dealer.com/ca/:/etc/hyperledger/fabric-ca-server-config
    ports:
      - "7254:7254"
